{% extends "base.html" %}
{% block content %}
<div class="edit-articles-container">
    <h1 class="edit-articles-title">Gestion des articles</h1>

    {% for article in articles %}
    <div class="edit-article-card">
        <div class="edit-article-text">
            <h2>{{ article['title'] }}</h2>
            <p>{{ article['created_at'].strftime("%d/%m/%Y") }}</p>
        </div>
        <div class="edit-article-actions">
            <a href="{{ url_for('edit_article', article_id=article['_id']) }}" class="edit-btn">✏️</a>
            <form action="{{ url_for('delete_article', article_id=article['_id']) }}" method="post" onsubmit="return confirm('Supprimer cet article ?')">
                <button type="submit" class="delete-btn">❌</button>
            </form>
        </div>
    </div>
    {% endfor %}

    <div class="pagination">
        {% for page in range(1, total_pages + 1) %}
        <a href="{{ url_for('edit_articles', page=page) }}" class="{% if page == current_page %}active{% endif %}">{{ page }}</a>
        {% endfor %}
    </div>

    <h2 class="edit-articles-subtitle">Créer un nouvel article</h2>
    <form method="POST" enctype="multipart/form-data" class="edit-article-form">
        <input type="text" name="title" placeholder="Titre" required>
        <textarea name="content" placeholder="Contenu" required></textarea>
        <input type="file" name="image" accept="image/*" required>
        <select name="shelter_id">
            <option value="">Aucun refuge associé</option>
            {% for shelter in shelters %}
                <option value="{{ shelter.shelter_id }}">{{ shelter.name }}</option>
            {% endfor %}
        </select>
        <button type="submit" class="btn-submit">Créer l'article</button>
    </form>
</div>
{% endblock %}
