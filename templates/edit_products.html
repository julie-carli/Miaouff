{% extends "base.html" %}
{% block title %}Gérer les Produits{% endblock %}
{% block content %}

<h1 class="edit-products-title">Gestion des Produits</h1>

<div class="edit-products-container">
    {% for product in products %}
    <div class="edit-products-item">
        <img src="{{ url_for('static', filename= product.image) }}" alt="{{ product.name }}" class="edit-products-image">
        <div class="edit-products-info">
            <h2 class="edit-products-name">{{ product.name }}</h2>
            <p class="edit-products-category">Catégorie: {{ product.category.name if product.category else 'Aucune' }}</p>
            <p class="edit-products-price">Prix: {{ product.price_incl_tax }} €</p>
            <p class="edit-products-stock">Stock: {{ product.stock }}</p>
        </div>
        <a href="{{ url_for('edit_product', product_id=product.product_id) }}" class="edit-products-edit-btn">✏️</a>
        <form method="POST" action="{{ url_for('delete_product', product_id=product.product_id) }}" class="edit-products-delete-form">
            <button type="submit" class="edit-products-delete-btn">❌</button>
        </form>
    </div>
    {% endfor %}
</div>

<h2 class="edit-products-subtitle">Ajouter un produit</h2>
<form method="POST" action="{{ url_for('edit_product') }}" class="edit-products-form">
    <input type="text" name="name" placeholder="Nom du produit" required class="edit-products-input">
    <textarea name="description" placeholder="Description" class="edit-products-textarea"></textarea>
    <input type="number" step="0.01" name="price_excl_tax" placeholder="Prix HT" required class="edit-products-input">
    <input type="number" step="0.01" name="price_incl_tax" placeholder="Prix TTC" required class="edit-products-input">
    <input type="number" name="stock" placeholder="Stock" required class="edit-products-input">
    <input type="number" step="0.01" name="weight" placeholder="Poids (kg)" required class="edit-products-input">
    <input type="text" name="image" placeholder="URL de l'image" class="edit-products-input">
    <select name="category_id" class="edit-products-select">
        <option value="">Sélectionner une catégorie</option>
        {% for category in categories %}
        <option value="{{ category.category_id }}">{{ category.name }}</option>
        {% endfor %}
    </select>
    <button type="submit" class="edit-products-btn">Ajouter</button>
</form>

{% endblock %}
