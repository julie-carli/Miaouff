{% extends "base.html" %}

{% block title %}Modifier Utilisateur{% endblock %}

{% block content %}

<form method="GET" action="{{ url_for('edit_users') }}" class="search-form">
    <input type="text" name="search" value="{{ search_query }}" placeholder="Rechercher..." class="search-input">
    <button type="submit" class="search-btn">Rechercher</button>
</form>

<div class="user-table-container">
    <table class="user-table">
        <thead>
            <tr>
                <th>Prénom</th>
                <th>Nom</th>
                <th>Email</th>
                <th>Ville</th>
                <th>Pays</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td>{{ user.first_name if user.first_name else 'Non renseigné' }}</td>
                <td>{{ user.last_name if user.last_name else 'Non renseigné' }}</td>
                <td>{{ user.email if user.email else 'Non renseigné' }}</td>
                <td>{{ user.city if user.city else 'Non renseigné' }}</td>
                <td>{{ user.country if user.country else 'Non renseigné' }}</td>
                <td>
                    <a href="{{ url_for('edit_user', user_id=user.user_id) }}" class="edit-users-btn">✏️</a>
                    
                    <form method="POST" action="{{ url_for('delete_user', user_id=user.user_id) }}" class="delete-user-form" style="display:inline;">
                        <button type="submit" class="delete-users-btn">❌</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% if total_pages > 1 %}
<ul class="pagination">
    {% if prev_page %}
    <li class="page-item"><a class="page-link" href="{{ url_for('edit_users', page=current_page-1, search=search_query) }}">Précédent</a></li>
    {% endif %}
    
    {% for page_num in range(1, total_pages + 1) %}
        {% if page_num == current_page %}
        <li class="page-item active"><a class="page-link" href="?page={{ page_num }}">{{ page_num }}</a></li>
        {% else %}
        <li class="page-item"><a class="page-link" href="{{ url_for('edit_users', page=page_num, search=search_query) }}">{{ page_num }}</a></li>
        {% endif %}
    {% endfor %}

    {% if next_page %}
    <li class="page-item"><a class="page-link" href="{{ url_for('edit_users', page=current_page+1, search=search_query) }}">Suivant</a></li>
    {% endif %}
</ul>
{% endif %}

{% endblock %}
