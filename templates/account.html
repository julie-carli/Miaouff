{% extends "base.html" %}

{% block title %}Mon compte{% endblock %}

{% block content %}
<div class="account-container">
    <h1 class="account-title">Mon compte</h1>
    
    <h2 class="account-section-title">Mes informations personnelles</h2>
    <div class="account-box">
        <p><strong>Prénom :</strong> {{ current_user.first_name if current_user.first_name else "Non renseigné" }}</p>
        <p><strong>Nom :</strong> {{ current_user.last_name if current_user.last_name else "Non renseigné" }}</p>
        <p><strong>Email :</strong> {{ current_user.email }}</p>
        <p><strong>Mot de passe :</strong> ********</p>
        <p><strong>Date de naissance :</strong> {{ current_user.birth_date if current_user.birth_date else "Non renseigné" }}</p>
        <p><strong>Téléphone :</strong> {{ current_user.phone if current_user.phone else "Non renseigné" }}</p>
        <a href="{{ url_for('home') }}" class="account-button">Modifier</a>
    </div>
    
    <h2 class="account-section-title">Mon adresse</h2>
    <div class="account-box">
        <p><strong>Numéro :</strong> {{ current_user.address_number if current_user.address_number else "Non renseigné" }}</p>
        <p><strong>Rue :</strong> {{ current_user.street_name if current_user.street_name else "Non renseigné" }}</p>
        <p><strong>Complément :</strong> {{ current_user.address_complement if current_user.address_complement else "Non renseigné" }}</p>
        <p><strong>Code postal :</strong> {{ current_user.postal_code if current_user.postal_code else "Non renseigné" }}</p>
        <p><strong>Ville :</strong> {{ current_user.city if current_user.city else "Non renseigné" }}</p>
        <p><strong>Pays :</strong> {{ current_user.country if current_user.country else "Non renseigné" }}</p>
        <a href="{{ url_for('home') }}" class="account-button">Modifier</a>
    </div>
    
    <h2 class="account-section-title">Mes commandes</h2>
    <div class="account-box">
        {% if current_user.orders|length >= 3 %}
            {% for order in current_user.orders[-3:] %}
                <p><strong>Commande #{{ order.id }}</strong> - {{ order.date }}</p>
            {% endfor %}
        {% elif current_user.orders %}
            {% for order in current_user.orders %}
                <p><strong>Commande #{{ order.id }}</strong> - {{ order.date }}</p>
            {% endfor %}
        {% else %}
            <p>Aucune commande passée.</p>
        {% endif %}
    </div>
    
    {% if current_user.role == "admin" %}
    <h2 class="account-section-title">Gestion administrateur</h2>
    <div class="account-admin-grid">
        <a href="{{ url_for('edit_shelters') }}" class="account-admin-box">Gérer les refuges</a>
        <a href="{{ url_for('edit_pets') }}" class="account-admin-box">Gérer les animaux à adopter</a>
        <a href="{{ url_for('edit_animals') }}" class="account-admin-box">Gérer le glossaire</a>
        <a href="{{ url_for('edit_articles') }}" class="account-admin-box">Gérer le blog</a>
        <a href="{{ url_for('edit_categories') }}" class="account-admin-box">Gérer les catégories</a>
        <a href="{{ url_for('edit_products') }}" class="account-admin-box">Gérer les produits</a>
        <a href="{{ url_for('edit_users') }}" class="account-admin-box">Gérer les utilisateurs</a>
        <a href="{{ url_for('home') }}" class="account-admin-box">SAV</a>
    </div>
    {% endif %}
    
    <a href="{{ url_for('logout') }}" class="account-logout-button">Se déconnecter</a>
</div>
{% endblock %}
